---
date: 2024/07/09 11:30
title: ç”¨æˆ·é‰´æƒæ¨¡å—å®ç°
project: gepick
tags:
 - æœåŠ¡ç«¯
---

# ç”¨æˆ·é‰´æƒæ¨¡å—å®ç°

![jwt-process](../../../public/projects/gepick/server/jwt-process.png)

- ç”¨æˆ·å¤„äºæœªç™»å½•çŠ¶æ€ï¼Œå½“ç”¨æˆ·ä½¿ç”¨å„ç§æ–¹å¼è¿›è¡Œç™»å½•ï¼ˆè´¦å·å¯†ç ç™»å½•ã€ç¬¬ä¸‰æ–¹ç™»å½•ï¼‰ï¼ŒapiæœåŠ¡æ ¹æ®ç”¨æˆ·å½“å‰çš„ç™»å½•æ–¹å¼ä½¿ç”¨ä¸åŒçš„ç­–ç•¥éªŒè¯ç”¨æˆ·ï¼š
  - å½“å‰éªŒè¯æ–¹å¼æ²¡éªŒè¯é€šè¿‡ï¼Œå‘ŠçŸ¥ç”¨æˆ·
  - å½“å‰éªŒè¯æ–¹å¼éªŒè¯é€šè¿‡ï¼Œç­¾å‘jwtç»™ç”¨æˆ·è¿›è¡Œä¿å­˜ï¼Œç”¨ä»¥è®¿é—®å—ä¿æŠ¤çš„æœåŠ¡èµ„æº
- ç”¨æˆ·å¤„äºç™»å½•çŠ¶æ€ï¼Œå½“ç”¨æˆ·ä½¿ç”¨jwtå»è®¿é—®æœåŠ¡èµ„æºçš„æ—¶å€™ï¼Œä½¿ç”¨JwtStrategyç­–ç•¥éªŒè¯ç”¨æˆ·jwt
  - JwtéªŒè¯æ²¡éªŒè¯é€šè¿‡ï¼Œå‘ŠçŸ¥ç”¨æˆ·
  - JwtéªŒè¯éªŒè¯é€šè¿‡ï¼Œè¿”å›å—ä¿æŠ¤çš„èµ„æº

éœ€è¦é‰´æƒçš„åŠŸèƒ½ï¼Œå…ˆç»è¿‡guardå¤„ç†é‰´æƒï¼Œé‰´æƒé€šè¿‡åæ‰è¿›å…¥controllerè¿›è¡Œç›¸å…³è·¯ç”±åŒ¹é…å¤„ç†ï¼Œå†æ¥ç€æ‰è¿›è¡Œå¯¹åº”çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚ã€

ä½†æ˜¯æ³¨æ„ï¼Œå¯¹äºloginè¿™ä¸ªæ–¹æ³•æ˜¯ä¸éœ€è¦è¿›è¡Œé‰´æƒçš„ã€‚

æ³¨å†Œï¼šæˆ‘æ˜¯è°ï¼Œæˆ‘è¦åŠ å…¥ç³»ç»Ÿ

ç™»å½•ï¼šæˆ‘æ˜¯è°ï¼Œæˆ‘è¦è¿›å…¥ç³»ç»Ÿ

é‰´æƒï¼šæˆ‘æ˜¯è°ï¼Œæˆ‘åœ¨è¿™ä¸ªç³»ç»Ÿæœ‰å“ªäº›æƒåŠ›

â€œè®¤è¯â€æ˜¯ä¸€ä¸ªå¤§çš„è¯é¢˜ï¼Œä¸åŒçš„è®¤è¯ç­–ç•¥çš„è®¤è¯æ–¹å¼éƒ½ä¸å¤ªä¸€æ ·ï¼Œå¸¸è§çš„è®¤è¯ç­–ç•¥æœ‰ï¼š

- ç”¨æˆ·å+å¯†ç è®¤è¯
- jwtè®¤è¯
- oauthè®¤è¯

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨guardæœºåˆ¶å»å®ç°apiè®¿é—®é™åˆ¶çš„åŠŸèƒ½ï¼Œæ¥è¾¾åˆ°ç”¨æˆ·å¿…é¡»ä¼ é€’æœ‰æ•ˆçš„jwtæ‰èƒ½å¤Ÿè®¿é—®è¢«ä¿æŠ¤çš„apiçš„æ•ˆæœã€‚

1. å®ç°auth guardå®ˆå«ï¼Œæ‹¦æˆªç”¨æˆ·è¯·æ±‚
2. å®ç°jwtæ¨¡å—è¿›è¡Œæ–°ç”¨æˆ·jwtçš„ç”Ÿæˆå’Œå·²æœ‰ç”¨æˆ·jwtçš„éªŒè¯ï¼Œè¾¾åˆ°è®¤è¯çš„ç›®çš„
    1. å®ç°jwtç”Ÿæˆ
    2. å®ç°jwtæ ¡éªŒ
3. ä¸ºäº†èƒ½è®©auth guardç”¨èµ·æ¥ï¼Œéœ€è¦åœ¨å¯¹åº”çš„åœ°æ–¹ï¼Œæ¯”å¦‚Controllerä½¿ç”¨å®ˆå«æ‹¦æˆªå™¨æ”¾ç½®å¯¹åº”çš„Auth Guardï¼Œè®©auth guardçš„å®ˆå«æ•ˆæœç”Ÿæ•ˆã€‚

æ•´ä¸ªè¿‡ç¨‹ï¼Œå…ˆguardé‰´åˆ«apiè®¿é—®æƒé™ï¼Œç„¶åpipeç®¡é“éªŒè¯ç”¨æˆ·ä¼ é€’æ•°æ®ï¼Œæœ€åä½¿ç”¨controllerå¯¹åº”çš„apiå¤„ç†ç¨‹åºã€‚

- ä¸¤ä¸ªåº”ç”¨jwtçš„åœ°æ–¹ï¼š
  - éªŒè¯ç”¨æˆ·ï¼Œå‘æ”¾jwt
  - éªŒè¯jwtï¼Œè¿”å›èµ„æº

![æˆªå±2024-02-26 16.32.18.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d94e6fc3-48a5-4c26-a94f-f2bde401830f/3cbf3b9f-0b59-47f1-afee-3d584a1ff7a2/%E6%88%AA%E5%B1%8F2024-02-26_16.32.18.png)

å¼•å…¥PassportModuleï¼Œæ˜¯å› ä¸ºå®ƒä¼šè¢«JwtModuleå†…éƒ¨å¼•ç”¨åˆ°ï¼Œæ›´å‡†ç¡®æ¥è¯´æ˜¯å¼•ç”¨å®šä¹‰çš„JwtStrategyï¼ˆå®ƒå±äºPassportModuleï¼‰ã€‚JwtModuleä¼šåˆ©ç”¨å…¶æ¥åšç­¾åå’Œæ ¡éªŒï¼Œå…¶ä¸­æ ¡éªŒçš„æ—¶å€™å°±æ˜¯åˆ©ç”¨çš„JwtStrategyçš„validateæ–¹æ³•ï¼Œå…¶å®é™…å†…éƒ¨åˆåˆ©ç”¨åˆ°äº†passport+passport-jwtåŒ…çš„verifyæ–¹æ³•ã€‚

- **åˆ›å»ºpassportç­–ç•¥**ï¼šPassportç­–ç•¥åˆ†ç±»ï¼ˆä½¿ç”¨ç­–ç•¥çš„å‰æï¼šå¯¹äºé€‰æ‹©çš„Â **ä»»ä½•**Â `Passport`Â ç­–ç•¥ï¼Œéƒ½éœ€è¦å®‰è£…Â `@nestjs/Passport`Â å’ŒÂ `Passport`Â åŒ…ï¼‰

    ```bash
    pnpm install --save @nestjs/passport passport
    ```

  - localç­–ç•¥ï¼šå®ç°äº†ä¸€ç§ç”¨æˆ·å/å¯†ç èº«ä»½éªŒè¯æœºåˆ¶

        ```bash
        pnpm install --save passport-local
        pnpm install --save-dev @types/passport-local
        ```

        ```tsx
        import { Inject, Injectable } from '@nestjs/common'
        import { PassportStrategy } from '@nestjs/passport'
        import { ExtractJwt, Strategy } from 'passport-jwt'

        import { ISecurityConfig, SecurityConfig } from '~/config'

        import { AuthStrategy } from '../auth.constant'

        @Injectable()
        export class JwtStrategy extends PassportStrategy(Strategy, AuthStrategy.JWT) {
          constructor(
            @Inject(SecurityConfig.KEY) private securityConfig: ISecurityConfig,
          ) {
            super({
              jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
              ignoreExpiration: false,
              secretOrKey: securityConfig.jwtSecret,
            })
          }

          async validate(payload: IAuthUser) {
            return payload
          }
        }
        ```

  - jwtç­–ç•¥ï¼š

        ```bash
        pnpm install --save passport-jwt
        pnpm install --save-dev @types/passport-jwt
        ```

        ```tsx
        import { Strategy } from 'passport-local';
        import { PassportStrategy } from '@nestjs/passport';
        import { Injectable, UnauthorizedException } from '@nestjs/common';
        import { AuthService } from '../auth.service';

        @Injectable()
        export class LocalStrategy extends PassportStrategy(Strategy) {
          constructor(private authService: AuthService) {
            super();
          }

          async validate(username: string, password: string): Promise<any> {
            const user = await this.authService.validateUser(username, password);

            if (!user) {
              throw new UnauthorizedException();
            }

            return user;
          }
        }
        ```

- **æ³¨å†Œpassportç­–ç•¥**ï¼šå®šä¹‰å®Œæˆå¯¹åº”çš„passport strategyç±»è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨AuthModuleæ·»åŠ ä¸¤ä¸ªåœ°æ–¹æ‰èƒ½å¤Ÿå¯ç”¨æˆ‘ä»¬åˆšåˆšå®šä¹‰çš„passport strategyçš„åŠŸèƒ½ã€‚

    ```tsx
    import { Module } from '@nestjs/common';
    import { AuthService } from './auth.service';
    import { UsersModule } from '../users/users.module';
    import { PassportModule } from '@nestjs/passport';
    import { JwtStrategy } from '.jwt.strategy';

    @Module({
      imports: [UsersModule, PassportModule], // 1.åŠ å…¥PassportModuleæ¨¡å—
      providers: [AuthService, JwtStrategy], // 2.åŠ å…¥åˆšå®šä¹‰çš„passport strategyç±»
    })
    export class AuthModule {}
    ```

- **ä½¿ç”¨passportç­–ç•¥**ï¼šå°†å¯¹åº”ç­–ç•¥å½“æˆAuthModuleçš„providerå¼•å…¥ã€‚ç„¶åå½“è®¾ç½®å¯¹åº”çš„APP_GUARDæ—¶ï¼Œä½¿ç”¨JwtAuthGuardï¼Œå†…éƒ¨æ˜¯å°±ä¼šè‡ªåŠ¨åº”ç”¨JwtStrategyç­–ç•¥ç±»ï¼ˆå†…éƒ¨å…¶å®å®ç°æ˜¯`class JwtAuthGuard extends AuthGuard('jwt')` ï¼Œå…¶ä¸­`AuthGuard('jwt')` æ„æ€æ˜¯ä½¿ç”¨jwtç­–ç•¥ï¼‰ã€‚æ¯ç§ç­–ç•¥çš„Â `validate()`Â æ–¹æ³•çš„å·®å¼‚å°±æ˜¯å¦‚ä½•ç¡®å®šç”¨æˆ·æ˜¯å¦å­˜åœ¨å’Œæ˜¯å¦æœ‰æ•ˆã€‚

    ```tsx
    @Module({
      imports: [
        PassportModule,
        JwtModule.registerAsync({
          imports: [ConfigModule],
          useFactory: (configService: ConfigService) => {
            const { jwtSecret, jwtExprire } = configService.get<IAuthConfig>(
              ConfigGroup.Auth,
            );

            return {
              secret: jwtSecret,
              expires: jwtExprire,
              ignoreExpiration: false,
            };
          },
          inject: [ConfigService],
        }),
        UserModule,
      ],
      providers: [
      JwtStrategy,
        {
          provide: APP_GUARD,
          useClass: JwtAuthGuard,
        },
      ]
    })
    export class AuthModule
    ```

## ä¸åŒç™»å½•çŠ¶æ€çš„è®¤è¯é‰´æƒéœ€æ±‚

- ç”¨æˆ·æœªç™»å½•ï¼šè¿›è¡Œç™»å½•ã€æ³¨å†Œã€å…¶ä»–apiè°ƒç”¨
  - `/api/auth/login` è°ƒç”¨`authService.login()` ã€‚æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒéªŒè¯ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ä½•éªŒè¯ç”¨æˆ·tokenæœ‰æ•ˆï¼Ÿï¼‰ï¼Œè¿”å›token
    - æ ¡éªŒç”¨æˆ·ä¼ é€’çš„ç™»å½•ä¿¡æ¯ï¼ˆnest pipeï¼‰
    - æ ¡éªŒé€šè¿‡åï¼Œä½¿ç”¨controllerå¯¹åº”çš„signinå¤„ç†å¯¹åº”çš„/auth/loginçš„è·¯ç”±ã€‚åœ¨AuthModuleä¸­ä½¿ç”¨UserModuleçš„UserServiceæŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨
    - é›†æˆnestjs jwtåŠŸèƒ½
      - ç”±äºç”¨æˆ·ä¿¡æ¯éœ€è¦äº¤ç»™nestjs jwtæ¨¡å—åšæ ¡éªŒè®¤è¯ï¼Œä½†æ˜¯jwtæ¨¡å—æ˜¯ä¸çŸ¥é“éœ€è¦ä½¿ç”¨ä»€ä¹ˆæ ¡éªŒç­–ç•¥çš„ï¼Œå› æ­¤éœ€è¦æå‰å®šä¹‰æ ¡éªŒç­–ç•¥ç±»ï¼Œå¦‚local.strategy.ts
      - å°†ç”¨æˆ·çš„ä¿¡æ¯äº¤ç»™nestjs jwtæ¨¡å—å»åšè®¤è¯ï¼Œå†…éƒ¨ä¼šè°ƒç”¨æ ¡éªŒç­–ç•¥ç±»çš„validateæ–¹æ³•å¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡Œæ ¡éªŒã€‚å¦‚æœç”¨æˆ·è®¤è¯é€šè¿‡ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„jwt
  - `/api/auth/register`è°ƒç”¨`authService.register()` ã€‚æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ›å»ºæ–°ç”¨æˆ·
    - åˆ›å»ºæ–°ç”¨æˆ·ä¹‹å‰ï¼Œéœ€è¦æ ¡éªŒç”¨æˆ·ä¼ é€’çš„åˆ›å»ºä¿¡æ¯ï¼ˆè¿™é‡Œå°±æ˜¯nestjs pipeç®¡é“çš„åº”ç”¨åœºæ™¯ï¼šéªŒè¯ä¸šåŠ¡æ•°æ® ï¼Œä¸»è¦éªŒè¯ä¸šåŠ¡é€»è¾‘ï¼Œå¦‚å¯†ç éœ€è¦6ä½ä»¥ä¸Š ã€‚nestjs pipeç®¡é“ä¼šç”±controllerçš„è·¯ç”±å¤„ç†ç¨‹åºå¤„ç†ï¼Œåœ¨è°ƒç”¨è·¯ç”±å¤„ç†æ–¹æ³•ä¹‹å‰ï¼Œå…ˆæ’å…¥pipeç®¡é“æ ¡éªŒä¼ é€’çš„å‚æ•°ï¼ˆdtoï¼‰ï¼‰
    - æ ¡éªŒé€šè¿‡åï¼Œåœ¨AuthModuleä¸­ä½¿ç”¨UserModuleçš„UserServiceæŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨
      - å­˜åœ¨ï¼ŒæŠ›å‡ºå¼‚å¸¸
      - ä¸å­˜åœ¨ï¼Œè°ƒç”¨UserServiceåˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·ï¼ˆç›¸å…³è”ï¼šå¯†ç çš„ä¿å­˜éœ€è¦åŠ å¯†ä¿å­˜ï¼Œè€Œä¸”éœ€è¦ä¸€å®šçš„æ‰‹æ®µæ¥ä¿å­˜æ¥å¯¹æŠ—å½©è™¹è¡¨æ”»å‡»
  - `/api/module` ï¼Œä½¿ç”¨Guardå®ˆå«æ‹¦æˆªï¼ŒéªŒè¯ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ä½•éªŒè¯ç”¨æˆ·tokenæœ‰æ•ˆï¼Ÿï¼‰ï¼ŒéªŒè¯é€šè¿‡åè¿›è¡Œapiå¤„ç†ï¼Œå¦åˆ™æŠ¥é”™è¿”å›ç»™å‰ç«¯
- ç”¨æˆ·å·²ç™»å½•ï¼šè¿›è¡Œå…¶ä»–apiè°ƒç”¨
  - `/api/module` ï¼Œä½¿ç”¨Guardå®ˆå«æ‹¦æˆªï¼ŒéªŒè¯ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚ä½•éªŒè¯ç”¨æˆ·tokenæœ‰æ•ˆï¼Ÿï¼‰ï¼ŒéªŒè¯é€šè¿‡åè¿›è¡Œapiå¤„ç†ï¼Œå¦åˆ™æŠ¥é”™è¿”å›ç»™å‰ç«¯

## Nestjsä¸­åˆ›å»ºGuardå®ˆå«åº”ç”¨äºAPIè®¿é—®æƒé™åœºæ™¯

1. å…¨å±€é…ç½®å®ˆå«

    ```tsx
    @Module({
      imports: [ConfigModule, DatabaseModule, AuthModule, UserModule],
      providers: [
        { // å…¨å±€é…ç½®å¼€å¯Authå®ˆå«ï¼Œæ‰€æœ‰çš„api controllerå¤„ç†ä¹‹å‰éƒ½éœ€è¦ç»è¿‡AuthGuardå®ˆå«è¿›è¡Œæ‹¦æˆªå¤„ç†
          provide: APP_GUARD,
          useClass: JwtAuthGuard,
        },
      ],
    })
    export class AppModule {}
    ```

2. å®šä¹‰AuthGuardå®ˆå«çš„é€»è¾‘
    - å¦‚æœæ˜¯apiå¤„ç†ç¨‹åºå¸¦æœ‰@Publicï¼Œè¯´æ˜æ˜¯å…¬å…±æ¥å£ï¼Œä¸éœ€è¦è®¤è¯å’Œé‰´æƒå°±å¯ä»¥ä½¿ç”¨ï¼Œç›´æ¥è¿”å›trueæ”¾è¡Œ

    ```tsx
    @Injectable()
    export class JwtAuthGuard extends AuthGuard('jwt') { //  AuthGuard('jwt')æ„æ€æ˜¯ä½¿ç”¨jwtç­–ç•¥
      constructor(private readonly reflector: Reflector) {
        super();
      }

      async canActivate(context: ExecutionContext): Promise<boolean> {
        // 1.å…¬å…±æ¥å£åˆ¤æ–­ï¼šå¸¦æœ‰@Public()è£…é¥°å™¨çš„æ¥å£ä¸éœ€è¦éªŒè¯
        const isPublic = this.reflector.getAllAndOverride<boolean>(IS_PUBLIC_KEY, [
          context.getHandler(),
          context.getClass(),
        ]);

        if (isPublic) {
          return true;
        }

        const token = '';
        if (!token) {
          throw new UnauthorizedException();
        }

        try {
        } catch {
          throw new UnauthorizedException();
        }
        return false;
      }
    }
    ```

## Nestjsä¸­åˆ›å»ºPipeç®¡é“åº”ç”¨äºæ•°æ®æ ¡éªŒåœºæ™¯

1. å…¨å±€é…ç½®ç®¡é“

    ```tsx
    app.useGlobalPipes(
      new ValidationPipe({
        transform: true,
        whitelist: true, // å»é™¤åœ¨ç±»ä¸Šä¸å­˜åœ¨çš„å­—æ®µ
      }),
    )
    ```

2. åˆ›å»ºclassç±»ï¼Œå³Entitiyï¼ŒDTO

    ```tsx
    export class SigninUserDto {
      username: string;
      password: string;

    ```

3. è®¾ç½®æ ¡éªŒè§„åˆ™

    ```tsx
    import { IsString, IsNotEmpty } from 'class-validator';

    export class SigninUserDto {
      @IsString()
      @IsNotEmpty()
      username: string;

      @IsString()
      @IsNotEmpty()
      password: string;
    }
    ```

4. ä½¿ç”¨classç±»ï¼Œå³Entitiyï¼ŒDTO

    ```tsx
    @Controller('auth')
    export class AuthController {
      @Post('/login')
      async login(@Body() sininUserDto: SigninUserDto) {
        console.log('ğŸš€ ~ AuthController ~ login ~ sininUserDto:', sininUserDto);
        return 'login';
      }
    }
    ```

## å¯†ç å¤„ç†

![æˆªå±2024-02-26 14.10.22.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d94e6fc3-48a5-4c26-a94f-f2bde401830f/c16d8b85-d81b-4d50-8769-f664d1846734/%E6%88%AA%E5%B1%8F2024-02-26_14.10.22.png)

    å³ä½¿å¯†ç ç»è¿‡äº†Hashå¤„ç†ï¼Œä¾ç„¶æ˜¯å­˜åœ¨é£é™©çš„ï¼Œæ¯”è¾ƒè‘—åçš„ä¸€ç§æ”»å‡»æ–¹å¼å°±æ˜¯å½©è™¹è¡¨ã€‚

    ![æˆªå±2024-02-26 14.12.07.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/d94e6fc3-48a5-4c26-a94f-f2bde401830f/45fead36-6944-485f-83e0-bdf3361530a8/%E6%88%AA%E5%B1%8F2024-02-26_14.12.07.png)

    å½©è™¹è¡¨æ”»å‡»çš„æ–¹å¼æ˜¯ï¼šå‡†å¤‡ä¸€å¼ è¡¨å¸¸è§çš„åŸå§‹å¯†ç åŠå…¶hashå€¼ï¼Œç„¶åå‘æ•°æ®åº“å‘é€hashå€¼æ¯”å¯¹æ•°æ®åº“å½“ä¸­å­˜å‚¨çš„ç”¨æˆ·å¯†ç hashå€¼ï¼Œå¦‚æœæ¯”å¯¹æˆåŠŸï¼Œåˆ™å¯ä»¥è¿”å›æ¥çŸ¥é“åŸå§‹å¯†ç ã€‚

    å¤„ç†è¯¥æ”»å‡»çš„æ–¹å¼æ˜¯ï¼šåœ¨å¾€æ•°æ®åº“ä¸­å­˜å‚¨ç”¨æˆ·çš„å¯†ç æ—¶åŠ ç›ï¼Œè®©ç›å’Œå¯†ç çš„hashå†è¿›è¡Œè®¡ç®—å¾—åˆ°ä¸€ä¸ªæ–°å­—ç¬¦ä¸²æ‰å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼ŒåŠ å¤§æ”»å‡»æˆæœ¬ã€‚

## è£…é¥°å™¨æ‰§è¡Œé¡ºåº

    åªè¦å‰è¾¹çš„è£…é¥°å™¨æ‰§è¡Œä¸é€šè¿‡ï¼Œåè¾¹çš„éƒ½ä¸ä¼šæ‰§è¡Œï¼Œç±»ä¼¼äºç†”æ–­æœºåˆ¶ï¼ˆtapableçš„ç†”æ–­hookï¼‰

    - ä»ä¸‹å¾€ä¸Š â¬†ï¸
    - ä»å·¦å¾€å³ â¡ï¸

## ç–‘é—®

    - ä¸ºä»€ä¹ˆè¦åœ¨AuthModuleå½“ä¸­å¯¼å…¥PassportModuleï¼Ÿ

        `import { PassportModule } from '@nestjs/passport';`

        ä¸ºpassportè¿™ä¸ªåº“åšä¸€ä¸ªnestä¸­é—´ä»¶ã€‚

    - ä¸ºä»€ä¹ˆè¦åœ¨AuthModuleå½“ä¸­å¯¼å…¥JwtModuleï¼Ÿ

        `import { JwtModule } from '@nestjs/jwt';`

        ä¸ºäº†åœ¨nestjsä¸­ä½¿ç”¨jwtåŠŸèƒ½
